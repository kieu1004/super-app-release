(self.webpackChunkauth=self.webpackChunkauth||[]).push([["src_screens_SignInScreen_tsx"],{66390:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),o=r(94578),a=r(33823);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var i=o.StyleSheet.create({background:{flex:1,width:"100%",backgroundColor:"#fff"},container:{flex:1,padding:20,width:"100%",maxWidth:340,alignSelf:"center",alignItems:"center",justifyContent:"center"}}),l=(0,n.memo)((function(e){var t=e.children;return(0,a.jsx)(o.View,{style:i.background,children:(0,a.jsx)(o.KeyboardAvoidingView,{style:i.container,behavior:"padding",children:t})})}));t.default=l},90655:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(70215)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),u=r(94578),i=r(82913),l=r(75489),c=r(33823),f=["mode","style","children"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var d=u.StyleSheet.create({button:{width:"100%",marginVertical:10},text:{fontWeight:"bold",fontSize:15,lineHeight:26}}),p=(0,a.memo)((function(e){var t=e.mode,r=e.style,n=e.children,a=(0,o.default)(e,f);return(0,c.jsx)(i.Button,Object.assign({style:[d.button,"outlined"===t&&{backgroundColor:l.theme.colors.surface},r],labelStyle:d.text,mode:t},a,{children:n}))}));t.default=p},80561:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),o=r(94578),a=r(75489),u=r(33823);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var l=o.StyleSheet.create({header:{fontSize:26,color:a.theme.colors.primary,fontWeight:"bold",paddingVertical:14}}),c=(0,n.memo)((function(e){var t=e.children;return(0,u.jsx)(o.Text,{style:l.header,children:t})}));t.default=c},97440:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),o=r(94578),a=r(33823);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var i=o.StyleSheet.create({image:{width:"100%",top:-60,height:200,resizeMode:"contain"}}),l=(0,n.memo)((function(){return(0,a.jsx)(o.Image,{source:{uri:"https://i.pinimg.com/originals/85/ad/a1/85ada1467cbaaf05b183050451a8e353.png"},style:i.image})}));t.default=l},88069:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(70215)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),u=r(94578),i=r(82913),l=r(75489),c=r(33823),f=["errorText"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var d=u.StyleSheet.create({container:{width:"100%",marginVertical:12},input:{backgroundColor:l.theme.colors.surface},error:{fontSize:14,color:l.theme.colors.error,paddingHorizontal:4,paddingTop:4}}),p=(0,a.memo)((function(e){var t=e.errorText,r=(0,o.default)(e,f);return(0,c.jsxs)(u.View,{style:d.container,children:[(0,c.jsx)(i.TextInput,Object.assign({style:d.input,selectionColor:l.theme.colors.primary,underlineColor:"transparent",mode:"outlined"},r)),t?(0,c.jsx)(u.Text,{style:d.error,children:t}):null]})}));t.default=p},35578:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.useAuth=t.AuthContext=void 0;var o=n(r(84481)),a=o.default.createContext({signIn:function(e,t){},signOut:function(){},signUp:function(e,t){}});t.AuthContext=a;t.useAuth=function(){return o.default.useContext(a)}},75489:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0;var n=r(82913),o=Object.assign({},n.DefaultTheme,{colors:Object.assign({},n.DefaultTheme.colors,{primary:"#600EE6",secondary:"#414757",error:"#f13a59"})});t.theme=o},99270:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.phoneNumberValidator=t.passwordValidator=t.nameValidator=t.emailValidator=void 0;t.emailValidator=function(e){return!e||e.length<=0?"Email cannot be empty.":/\S+@\S+\.\S+/.test(e)?"":"Ooops! We need a valid email address."};t.passwordValidator=function(e){return!e||e.length<=0?"Password cannot be empty.":""};t.nameValidator=function(e){return!e||e.length<=0?"Name cannot be empty.":""};t.phoneNumberValidator=function(e){return!e||e.replace(/\D/g,"").length<=0?"Phone number cannot be empty.":/^\+84\d{9}$/.test(e)?"":"Please enter a valid phone number with a country code, starting with '+84'."}},42802:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(17156)),a=n(r(27424)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),i=r(94578),l=n(r(66390)),c=n(r(97440)),f=n(r(80561)),s=n(r(90655)),d=n(r(88069)),p=r(75489),y=r(99270),h=n(r(29450)),v=r(35578),b=r(82913),g=r(33823);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var O=i.StyleSheet.create({forgotPassword:{width:"100%",alignItems:"flex-end",marginBottom:24},row:{flexDirection:"row",marginTop:4},label:{color:p.theme.colors.secondary},link:{fontWeight:"bold",color:p.theme.colors.primary}}),j=(0,u.memo)((function(e){e.navigation;var t,r=(0,u.useState)({value:"+84",error:""}),n=(0,a.default)(r,2),p=n[0],m=n[1],j=(0,u.useState)({value:"",error:""}),w=(0,a.default)(j,2),P=w[0],x=w[1],_=(0,u.useState)(!1),k=(0,a.default)(_,2),M=k[0],S=k[1],T=(0,u.useState)(""),W=(0,a.default)(T,2),I=W[0],C=W[1],D=function(){S(!0)},V=(0,v.useAuth)().signIn,E=(t=(0,o.default)((function*(){var e=(0,y.passwordValidator)(P.value);if((0,y.phoneNumberValidator)(p.value)||e)return C("Invalid phone number or password"),void D();var t=new FormData;t.append("buyerPhone",p.value),t.append("password",P.value);try{var r=yield fetch("http://149.28.134.133/api/v1/account/login-by-phone",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:t});if(200===r.status){var n=yield r.json();yield h.default.shared.setCredentials(n.result.account.token),yield h.default.shared.setUserInfo(n.result.account),V(p.value,P.value),C("Login successful!"),D()}else 401===r.status?(C("Invalid phone number or password"),D()):console.error("Login error:",r.status)}catch(e){console.error("Login error:",e)}})),function(){return t.apply(this,arguments)});return(0,g.jsxs)(l.default,{children:[(0,g.jsx)(c.default,{}),(0,g.jsx)(f.default,{children:"Welcome back."}),(0,g.jsx)(d.default,{label:"Buyer Phone",returnKeyType:"next",value:p.value,onChangeText:function(e){return m({value:"+"+e.replace(/\D/g,""),error:""})},error:!!p.error,errorText:p.error,autoCapitalize:"none",keyboardType:"numeric"}),(0,g.jsx)(d.default,{label:"Password",returnKeyType:"done",value:P.value,onChangeText:function(e){return x({value:e,error:""})},error:!!P.error,errorText:P.error,secureTextEntry:!0}),(0,g.jsx)(b.Snackbar,{visible:M,onDismiss:function(){return S(!1)},duration:4e3,action:{label:"Undo",onPress:function(){m({value:"+84",error:""}),x({value:"",error:""})}},children:I||"Please fill in Buyer Phone & Password fields."}),(0,g.jsx)(i.View,{style:O.forgotPassword,children:(0,g.jsx)(i.TouchableOpacity,{onPress:function(){return i.Alert.alert("Not implemented yet")},children:(0,g.jsx)(i.Text,{style:O.label,children:"Forgot your password?"})})}),(0,g.jsx)(s.default,{mode:"contained",onPress:E,children:"Login"}),(0,g.jsxs)(i.View,{style:O.row,children:[(0,g.jsx)(i.Text,{style:O.label,children:"Don’t have an account? "}),(0,g.jsx)(i.TouchableOpacity,{onPress:function(){return i.Alert.alert("Not implemented yet")},children:(0,g.jsx)(i.Text,{style:O.link,children:"Sign up"})})]})]})}));t.default=j},29450:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=n(r(56690)),u=n(r(89728)),i=n(r(25656)),l=function(){function e(){(0,a.default)(this,e),this.TOKEN_KEY="token",this.USER_INFO="user_info"}return(0,u.default)(e,[{key:"getCredentials",value:function(){return i.default.getItem(this.TOKEN_KEY)}},{key:"setCredentials",value:function(e){return i.default.setItem(this.TOKEN_KEY,e)}},{key:"removeCredentials",value:function(){return i.default.removeItem(this.TOKEN_KEY)}},{key:"getUserInfo",value:function(){return i.default.getItem(this.USER_INFO).then((function(e){return e?JSON.parse(e):null}))}},{key:"setUserInfo",value:function(e){return i.default.setItem(this.USER_INFO,JSON.stringify(e))}},{key:"removeUserInfo",value:function(){return i.default.removeItem(this.USER_INFO)}}]),e}();o=l,l.shared=new o;var c=l;t.default=c}}]);//# sourceMappingURL=src_screens_SignInScreen_tsx.chunk.bundle.map?platform=android